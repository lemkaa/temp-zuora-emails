<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>Password Protected Page</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">This page is password protected.</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
        Protected by <a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt</a>
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
